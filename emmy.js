(function(){function u(a){return a instanceof Array||a&&!("string"===typeof a||a instanceof String)&&!a.nodeType&&("undefined"!=typeof window?a!=window:!0)&&!v(a)&&"number"===typeof a.length}function h(a,b){var c=p.get(a);return b?c&&c[b]||[]:c||{}}function l(a,b,c){var e=b[0],d=b[1],g=b[2],f=b[3];if(d&&d.constructor&&"Object"===d.constructor.name){for(var h in d)l(a,[e,h,d[h]])||a.apply(this,[e,h,d[h]]);return!0}if(z(f)&&!z(g))return a.apply(this,[e,d,f,g].concat(q(b,4))),!0;if(u(g)&&!c){b=q(b,3);
for(c=g.length;c--;)a.apply(this,[e,d,g[c]].concat(b));return!0}if(u(d)){b=q(b,2);for(c=d.length;c--;)a.apply(this,[e,d[c]].concat(b));return!0}if(u(e)){b=q(b,1);for(c=e.length;c--;)a.apply(this,[e[c]].concat(b));return!0}}function n(a,b,c){if(void 0===c){var e=a.removeAll||a.removeAllListeners;e&&e.call(a,b,c);c=A(a);if(void 0===b)return B(n,[a,c]);if(c[b])return B(n,[a,b,c[b]])}else{if(e=a.off||a.removeEventListener||a.removeListener)if(C.freeze(a,"off"+b))e.call(a,b,c),C.a(a,"off"+b);else return;
b=A(a,b);for(a=0;a<b.length;a++)if(b[a]===c||b[a].fn===c){b.splice(a,1);break}}}function f(a){if(a){for(var b in k)a[b]=k[b];return a}}window.Emitter=f;var m,v,r,s,w,x,p=new WeakMap;h.add=function(a,b,c){p.has(a)||p.set(a,{});a=p.get(a);(a[b]=a[b]||[]).push(c)};m={freeze:function(a,b){var c=t.get(a);if(c&&c[b])return!1;c||(c={},t.set(a,c));return c[b]=!0},a:function(a,b){var c=t.get(a);if(!c||!c[b])return!1;c[b]=null;return!0},isFrozen:function(a,b){var c=t.get(a);return c&&c[b]}};var t=new WeakMap;
v=function(a){return!(!a||!a.apply)};r=r=function(a,b,c){var e=[],d=a.length;if(0===d)return e;b=0>b?Math.max(0,b+d):b||0;for(void 0!==c&&(d=0>c?c+d:c);d-- >b;)e[d-b]=a[d];return e};s=function(a,b,c,e){var d=a.on||a.addEventListener||a.addListener,g;e?(g=function(){if(e.apply(this,arguments))return c.apply(this,arguments)},g.fn=c):g=c;if(d)if(D.freeze(a,"on"+b))d.call(a,b,g),D.a(a,"on"+b);else return;G.add(a,b,g)};var D=m,G=h,E=r;w=function(a,b,c,e){var d,g=b;a.nodeType||a===H||a===I?(b instanceof
Event?g=b:(g=document.createEvent("CustomEvent"),g.initCustomEvent(b,e,!0,c)),d=a.dispatchEvent):y&&a instanceof y?(g=y.Event(b,c),g.detail=c,d=e?targte.trigger:a.triggerHandler):d=a.emit||a.trigger||a.fire||a.dispatchEvent;if(d&&m.freeze(a,"emit"+b))d.call(a,g,c,e),m.a(a,"emit"+b);else{d=h(a,g);d=E(d);for(var g=E(arguments,2),f=0;f<d.length;f++)d[f]&&d[f].apply(a,g)}};var y="undefined"===typeof jQuery?void 0:jQuery,H="undefined"===typeof document?void 0:document,I="undefined"===typeof window?void 0:
window,z=v,q=r,C=m,A=h,B=l;x=function(a,b,c){var e=a.once||a.one||a.addOnceEventListener||a.addOnceListener;if(e&&F.freeze(a,"one"+b))e.call(a,b,c),F.a(a,"one"+b);else{var d=function(){J(a,b,d);c.apply(a,arguments)};d.fn=c;K(a,b,d)}};var F=m,K=s,J=n,k=f.prototype;k.on=function(a,b){s(this,a,b);return this};k.once=function(a,b){x(this,a,b);return this};k.off=function(a,b){n(this,a,b);return this};k.emit=function(a,b,c){w(this,a,b,c);return this};k.listeners=function(a){return h(this,a)};k.hasListeners=
function(a){return!!h(this,a).length};var L=f.on=function(a,b,c){if(l(L,arguments))return f;s.apply(this,arguments);return f},M=f.once=function(a,b,c){if(l(M,arguments))return f;x(a,b,c);return f},N=f.off=function(a,b,c){if(l(N,arguments))return f;n(a,b,c);return f},O=f.emit=function(a,b,c,e){if(l(O,arguments,!0))return f;w.apply(this,arguments);return f};f.listeners=h;f.hasListeners=function(a,b){return!!h(a,b).length}})();
