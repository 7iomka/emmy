(function(){function s(a){return a instanceof Array||a&&!("string"===typeof a||a instanceof String)&&!a.nodeType&&("undefined"!=typeof window?a!=window:!0)&&!(a&&a.apply)&&"number"===typeof a.length}function h(a,b){var c=p.get(a);return b?c&&c[b]||[]:c||{}}function l(a,b,c){if(E(l,arguments))return a;var d,e;if(void 0===c){(d=a.removeAll||a.removeAllListeners)&&d.call(a,b,c);d=y(a);if(void 0===b)for(e in d)l(a,e,d[e]);else d[b]&&l(a,b,d[b]);return a}if(e=a.off||a.removeEventListener||a.removeListener)if(z.freeze(a,
"off"+b))e.call(a,b,c),z.a(a,"off"+b);else return a;d=y(a,b);for(e=0;e<d.length;e++)if(d[e]===c||d[e].fn===c){d.splice(e,1);break}return a}function q(a,b,c){if(F(q,arguments))return a;var d=a.on||a.addEventListener||a.addListener;if(d)if(A.freeze(a,"on"+b))d.call(a,b,c),A.a(a,"on"+b);else return a;G.add(a,b,c);return a}function t(a,b,c,d){if(H(t,arguments))return a;var e,f=b;a.nodeType||a===I||a===J?(b instanceof Event?f=b:(f=document.createEvent("CustomEvent"),f.initCustomEvent(b,d,!0,c)),e=a.dispatchEvent):
u&&a instanceof u?(f=u.Event(b,c),f.detail=c,e=d?targte.trigger:a.triggerHandler):e=a.emit||a.trigger||a.fire||a.dispatchEvent;if(e&&B.freeze(a,"emit"+b))return e.call(a,f,c,d),B.a(a,"emit"+b),a;e=K(a,f);e=C(e);for(var f=C(arguments,2),g=0;g<e.length;g++)e[g]&&e[g].apply(a,f);return a}function v(a,b,c){function d(){L(a,b,d);c.apply(a,arguments)}if(M(v,arguments))return a;var e=a.once||a.one||a.addOnceEventListener||a.addOnceListener;if(e&&D.freeze(a,"one"+b))return e.call(a,b,c),D.a(a,"one"+b),a;
d.fn=c;N(a,b,d);return a}function g(a){if(a){for(var b in k)a[b]=k[b];return a}}window.Emitter=g;var m,w,n,p=new WeakMap;h.add=function(a,b,c){p.has(a)||p.set(a,{});a=p.get(a);(a[b]=a[b]||[]).push(c)};m={freeze:function(a,b){var c=r.get(a);if(c&&c[b])return!1;c||(c={},r.set(a,c));return c[b]=!0},a:function(a,b){var c=r.get(a);if(!c||!c[b])return!1;c[b]=null;return!0},isFrozen:function(a,b){var c=r.get(a);return c&&c[b]}};var r=new WeakMap,x=w=w=function(a,b,c){var d=[],e=a.length;if(0===e)return d;
b=0>b?Math.max(0,b+e):b||0;for(void 0!==c&&(e=0>c?c+e:c);e-- >b;)d[e-b]=a[e];return d};n=function(a,b){var c=b[0],d=b[1],e=b[2];if(d&&d.constructor&&"Object"===d.constructor.name){for(var f in d)a(c,f,d[f]);return!0}if(s(e)){b=x(b,3);for(f=e.length;f--;)a.apply(this,[c,d,e[f]].concat(b));return!0}if(s(d)){b=x(b,2);for(f=d.length;f--;)a.apply(this,[c,d[f]].concat(b));return!0}if(s(c)){b=x(b,1);for(f=c.length;f--;)a.apply(this,[c[f]].concat(b));return!0}};var z=m,y=h,E=n,A=m,G=h,F=n,B=m,K=h,C=w,H=n,
u="undefined"===typeof jQuery?void 0:jQuery,I="undefined"===typeof document?void 0:document,J="undefined"===typeof window?void 0:window,D=m,L=l,N=q,M=n,k=g.prototype;k.on=function(a,b){return q(this,a,b)};k.once=function(a,b){return v(this,a,b)};k.off=function(a,b){return l(this,a,b)};k.emit=function(a,b,c){return t(this,a,b,c)};k.listeners=function(a){return h(this,a)};k.hasListeners=function(a){return!!h(this,a).length};g.on=function(a,b,c){q(a,b,c);return g};g.once=function(a,b,c){v(a,b,c);return g};
g.off=function(a,b,c){l(a,b,c);return g};g.emit=function(a,b,c,d){t(a,b,c,d);return g};g.listeners=h;g.hasListeners=function(a,b){return!!h(a,b).length}})();
