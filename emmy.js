(function(){function u(a){return a instanceof Array||a&&!("string"===typeof a||a instanceof String)&&!a.nodeType&&("undefined"!=typeof window?a!=window:!0)&&!p(a)&&"number"===typeof a.length}function h(a,b){var c=q.get(a);return b?c&&c[b]||[]:c||{}}function l(a,b,c){if(!F(l,arguments)){var e,d;if(void 0===c)if((e=a.removeAll||a.removeAllListeners)&&e.call(a,b,c),e=z(a),void 0===b)for(d in e)l(a,d,e[d]);else e[b]&&l(a,b,e[b]);else{if(d=a.off||a.removeEventListener||a.removeListener)if(A.freeze(a,"off"+
b))d.call(a,b,c),A.a(a,"off"+b);else return;e=z(a,b);for(d=0;d<e.length;d++)if(e[d]===c||e[d].fn===c){e.splice(d,1);break}}}}function r(a,b,c,e){if(!G(r,arguments)){var d=a.on||a.addEventListener||a.addListener,f;e?(f=function(){if(e.apply(this,arguments))return c.apply(this,arguments)},f.fn=c):f=c;if(d)if(B.freeze(a,"on"+b))d.call(a,b,f),B.a(a,"on"+b);else return;H.add(a,b,f)}}function v(a,b,c,e){if(!I(v,arguments,!0)){var d,f=b;a.nodeType||a===J||a===K?(b instanceof Event?f=b:(f=document.createEvent("CustomEvent"),
f.initCustomEvent(b,e,!0,c)),d=a.dispatchEvent):w&&a instanceof w?(f=w.Event(b,c),f.detail=c,d=e?targte.trigger:a.triggerHandler):d=a.emit||a.trigger||a.fire||a.dispatchEvent;if(d&&C.freeze(a,"emit"+b))d.call(a,f,c,e),C.a(a,"emit"+b);else{d=L(a,f);d=D(d);for(var f=D(arguments,2),g=0;g<d.length;g++)d[g]&&d[g].apply(a,f)}}}function x(a,b,c){if(!M(x,arguments)){var e=a.once||a.one||a.addOnceEventListener||a.addOnceListener;if(e&&E.freeze(a,"one"+b))return e=e.call(a,b,c),E.a(a,"one"+b),e;var d=function(){N(a,
b,d);c.apply(a,arguments)};d.fn=c;O(a,b,d);return d}}function g(a){if(a){for(var b in k)a[b]=k[b];return a}}window.Emitter=g;var m,p,y,n,q=new WeakMap;h.add=function(a,b,c){q.has(a)||q.set(a,{});a=q.get(a);(a[b]=a[b]||[]).push(c)};m={freeze:function(a,b){var c=s.get(a);if(c&&c[b])return!1;c||(c={},s.set(a,c));return c[b]=!0},a:function(a,b){var c=s.get(a);if(!c||!c[b])return!1;c[b]=null;return!0},isFrozen:function(a,b){var c=s.get(a);return c&&c[b]}};var s=new WeakMap;p=function(a){return!(!a||!a.apply)};
var t=y=y=function(a,b,c){var e=[],d=a.length;if(0===d)return e;b=0>b?Math.max(0,b+d):b||0;for(void 0!==c&&(d=0>c?c+d:c);d-- >b;)e[d-b]=a[d];return e};n=function(a,b,c){var e=b[0],d=b[1],f=b[2],g=b[3];if(d&&d.constructor&&"Object"===d.constructor.name){for(var h in d)a(e,h,d[h]);return!0}if(p(g)&&!p(f))return a.apply(this,[e,d,g,f].concat(t(b,4))),!0;if(u(f)&&!c){b=t(b,3);for(c=f.length;c--;)a.apply(this,[e,d,f[c]].concat(b));return!0}if(u(d)){b=t(b,2);for(c=d.length;c--;)a.apply(this,[e,d[c]].concat(b));
return!0}if(u(e)){b=t(b,1);for(c=e.length;c--;)a.apply(this,[e[c]].concat(b));return!0}};var A=m,z=h,F=n,B=m,H=h,G=n,C=m,L=h,D=y,I=n,w="undefined"===typeof jQuery?void 0:jQuery,J="undefined"===typeof document?void 0:document,K="undefined"===typeof window?void 0:window,E=m,N=l,O=r,M=n,k=g.prototype;k.on=function(a,b){r(this,a,b);return this};k.once=function(a,b){x(this,a,b);return this};k.off=function(a,b){l(this,a,b);return this};k.emit=function(a,b,c){v(this,a,b,c);return this};k.listeners=function(a){return h(this,
a)};k.hasListeners=function(a){return!!h(this,a).length};g.on=function(a,b,c){r(a,b,c);return g};g.once=function(a,b,c){x(a,b,c);return g};g.off=function(a,b,c){l(a,b,c);return g};g.emit=function(a,b,c,e){v(a,b,c,e);return g};g.listeners=h;g.hasListeners=function(a,b){return!!h(a,b).length}})();
