(function(){function s(a){return a instanceof Array||a&&!("string"===typeof a||a instanceof String)&&!a.nodeType&&("undefined"!=typeof window?a!=window:!0)&&!(a&&a.apply)&&"number"===typeof a.length}function g(a,b){var c=p.get(a);return b?c&&c[b]||[]:c||{}}function l(a,b,c){if(!E(l,arguments)){var e,d;if(void 0===c)if((e=a.removeAll||a.removeAllListeners)&&e.call(a,b,c),e=y(a),void 0===b)for(d in e)l(a,d,e[d]);else e[b]&&l(a,b,e[b]);else{if(d=a.off||a.removeEventListener||a.removeListener)if(z.freeze(a,
"off"+b))d.call(a,b,c),z.a(a,"off"+b);else return;e=y(a,b);for(d=0;d<e.length;d++)if(e[d]===c||e[d].fn===c){e.splice(d,1);break}}}}function q(a,b,c){if(!F(q,arguments)){var e=a.on||a.addEventListener||a.addListener;if(e)if(A.freeze(a,"on"+b))e.call(a,b,c),A.a(a,"on"+b);else return;G.add(a,b,c)}}function t(a,b,c,e){if(!H(t,arguments,!0)){var d,h=b;a.nodeType||a===I||a===J?(b instanceof Event?h=b:(h=document.createEvent("CustomEvent"),h.initCustomEvent(b,e,!0,c)),d=a.dispatchEvent):u&&a instanceof u?
(h=u.Event(b,c),h.detail=c,d=e?targte.trigger:a.triggerHandler):d=a.emit||a.trigger||a.fire||a.dispatchEvent;if(d&&B.freeze(a,"emit"+b))d.call(a,h,c,e),B.a(a,"emit"+b);else{d=K(a,h);d=C(d);for(var h=C(arguments,2),f=0;f<d.length;f++)d[f]&&d[f].apply(a,h)}}}function v(a,b,c){if(!L(v,arguments)){var e=a.once||a.one||a.addOnceEventListener||a.addOnceListener;if(e&&D.freeze(a,"one"+b))return e=e.call(a,b,c),D.a(a,"one"+b),e;var d=function(){M(a,b,d);c.apply(a,arguments)};d.fn=c;N(a,b,d);return d}}function f(a){if(a){for(var b in k)a[b]=
k[b];return a}}window.Emitter=f;var m,w,n,p=new WeakMap;g.add=function(a,b,c){p.has(a)||p.set(a,{});a=p.get(a);(a[b]=a[b]||[]).push(c)};m={freeze:function(a,b){var c=r.get(a);if(c&&c[b])return!1;c||(c={},r.set(a,c));return c[b]=!0},a:function(a,b){var c=r.get(a);if(!c||!c[b])return!1;c[b]=null;return!0},isFrozen:function(a,b){var c=r.get(a);return c&&c[b]}};var r=new WeakMap,x=w=w=function(a,b,c){var e=[],d=a.length;if(0===d)return e;b=0>b?Math.max(0,b+d):b||0;for(void 0!==c&&(d=0>c?c+d:c);d-- >b;)e[d-
b]=a[d];return e};n=function(a,b,c){var e=b[0],d=b[1],f=b[2];if(d&&d.constructor&&"Object"===d.constructor.name){for(var g in d)a(e,g,d[g]);return!0}if(s(f)&&!c){b=x(b,3);for(c=f.length;c--;)a.apply(this,[e,d,f[c]].concat(b));return!0}if(s(d)){b=x(b,2);for(c=d.length;c--;)a.apply(this,[e,d[c]].concat(b));return!0}if(s(e)){b=x(b,1);for(c=e.length;c--;)a.apply(this,[e[c]].concat(b));return!0}};var z=m,y=g,E=n,A=m,G=g,F=n,B=m,K=g,C=w,H=n,u="undefined"===typeof jQuery?void 0:jQuery,I="undefined"===typeof document?
void 0:document,J="undefined"===typeof window?void 0:window,D=m,M=l,N=q,L=n,k=f.prototype;k.on=function(a,b){q(this,a,b);return this};k.once=function(a,b){v(this,a,b);return this};k.off=function(a,b){l(this,a,b);return this};k.emit=function(a,b,c){t(this,a,b,c);return this};k.listeners=function(a){return g(this,a)};k.hasListeners=function(a){return!!g(this,a).length};f.on=function(a,b,c){q(a,b,c);return f};f.once=function(a,b,c){v(a,b,c);return f};f.off=function(a,b,c){l(a,b,c);return f};f.emit=function(a,
b,c,e){t(a,b,c,e);return f};f.listeners=g;f.hasListeners=function(a,b){return!!g(a,b).length}})();
