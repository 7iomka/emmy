(function(){function h(a,b){var c=q.get(a);return b?c&&c[b]||[]:c||{}}function m(a,b,c){if(u(c)){for(var d=c.length;d--;)m(a,b,c[d]);return a}if(u(b)){for(d=b.length;d--;)m(a,b[d],c);return a}if(u(a)){for(d=a.length;d--;)m(a[d],b,c);return a}if(d=a.on||a.addEventListener||a.addListener)if(A.freeze(a,"on"+b))d.call(a,b,c),A.a(a,"on"+b);else return a;H.add(a,b,c);return a}function k(a,b,c){var d;if(v(c)){for(d=c.length;d--;)k(a,b,c[d]);return a}if(v(b)){for(d=b.length;d--;)k(a,b[d],c);return a}if(v(a)){for(d=
a.length;d--;)k(a[d],b,c);return a}if(void 0===c){var e=a.removeAll||a.removeAllListeners;e&&e.call(a,b,c);c=B(a);if(void 0===b)for(d in c)k(a,d,c[d]);else c[b]&&k(a,b,c[b]);return a}if(d=a.off||a.removeEventListener||a.removeListener)if(C.freeze(a,"off"+b))d.call(a,b,c),C.a(a,"off"+b);else return a;b=B(a,b);for(d=0;d<b.length;d++)if(b[d]===c||b[d].fn===c){b.splice(d,1);break}return a}function r(a,b,c,d){var e,f=b;e=D(arguments,1);var g=e.slice(1);if(E(b)){for(f=b.length;f--;)r.apply(this,a,b[f],
g);return a}if(E(a)){for(f=a.length;f--;)r.apply(this,a[f],e);return a}a.nodeType||a===I||a===J?(b instanceof Event?f=b:(f=document.createEvent("CustomEvent"),f.initCustomEvent(b,d,!0,c)),e=a.dispatchEvent):w&&a instanceof w?(f=w.Event(b,c),f.detail=c,e=d?targte.trigger:a.triggerHandler):e=a.emit||a.trigger||a.fire||a.dispatchEvent;if(e&&F.freeze(a,"emit"+b))return e.call(a,f,c,d),F.a(a,"emit"+b),a;f=K(a,f);e=D(f);for(f=0;f<e.length;f++)e[f]&&e[f].apply(a,g);return a}function n(a,b,c){function d(){L(a,
b,d);c.apply(a,arguments)}if(x(c)){for(var e=c.length;e--;)n(a,b,c[e]);return a}if(x(b)){for(e=b.length;e--;)n(a,b[e],c);return a}if(x(a)){for(e=a.length;e--;)n(a[e],b,c);return a}if((e=a.once||a.one||a.addOnceEventListener||a.addOnceListener)&&G.freeze(a,"one"+b))return e.call(a,b,c),G.a(a,"one"+b),a;d.fn=c;M(a,b,d);return a}function g(a){if(a){for(var b in l)a[b]=l[b];return a}}window.Emitter=g;var p,y,z,s,q=new WeakMap;h.add=function(a,b,c){q.has(a)||q.set(a,{});a=q.get(a);(a[b]=a[b]||[]).push(c)};
p={freeze:function(a,b){var c=t.get(a);if(c&&c[b])return!1;c||(c={},t.set(a,c));return c[b]=!0},a:function(a,b){var c=t.get(a);if(!c||!c[b])return!1;c[b]=null;return!0},isFrozen:function(a,b){var c=t.get(a);return c&&c[b]}};var t=new WeakMap;y=function(a){return a instanceof Array};z=z=function(a,b,c){var d=[],e=a.length;if(0===e)return d;b=0>b?Math.max(0,b+e):b||0;for(void 0!==c&&(e=0>c?c+e:c);e-- >b;)d[e-b]=a[e];return d};s=function(a){return y(a)||a&&!("string"===typeof a||a instanceof String)&&
!a.nodeType&&("undefined"!=typeof window?a!=window:!0)&&!(a&&a.apply)&&"number"===typeof a.length};var A=p,H=h,u=s,C=p,v=s,B=h,F=p,K=h,E=y,D=z,w="undefined"===typeof jQuery?void 0:jQuery,I="undefined"===typeof document?void 0:document,J="undefined"===typeof window?void 0:window,G=p,x=s,L=k,M=m,l=g.prototype;l.on=function(a,b){return m(this,a,b)};l.once=function(a,b){return n(this,a,b)};l.off=function(a,b){return k(this,a,b)};l.emit=function(a,b,c){return r(this,a,b,c)};l.listeners=function(a){return h(this,
a)};l.hasListeners=function(a){return!!h(this,a).length};g.on=function(a,b,c){m(a,b,c);return g};g.once=function(a,b,c){n(a,b,c);return g};g.off=function(a,b,c){k(a,b,c);return g};g.emit=function(a,b,c,d){r(a,b,c,d);return g};g.listeners=h;g.hasListeners=function(a,b){return!!h(a,b).length}})();
