(function(){function h(a,b){var c=n.get(a);return b?c&&c[b]||[]:c||{}}function k(a,b,c){var d;if(v(c)){for(d=c.length;d--;)k(a,b,c[d]);return a}if(v(b)){for(d=b.length;d--;)k(a,b[d],c);return a}if(void 0===c){var f=a.removeAll||a.removeAllListeners;if(f)if(p.freeze(a,"allOff"+b))f.call(a,b,c),p.a(a,"allOff"+b);else return a;c=w(a);if(void 0===b)for(d in c)k(a,d,c[d]);else c[b]&&k(a,b,c[b]);return a}if(d=a.off||a.removeEventListener||a.removeListener)if(p.freeze(a,"off"+b))d.call(a,b,c),p.a(a,"off"+
b);else return a;b=w(a,b);for(d=0;d<b.length;d++)if(b[d]===c||b[d].b===c){b.splice(d,1);break}return a}function m(a,b,c){if(x(c)){for(var d=c.length;d--;)m(a,b,c[d]);return a}if(x(b)){for(d=b.length;d--;)m(a,b[d],c);return a}if(d=a.on||a.addEventListener||a.addListener)if(y.freeze(a,"on"+b))d.call(a,b,c),y.a(a,"on"+b);else return a;B.add(a,b,c);return a}function q(a,b,c){function d(){C(a,b,d);c.apply(a,arguments)}if(z(c)){for(var f=c.length;f--;)q(a,b,c[f]);return a}if(z(b)){for(f=b.length;f--;)q(a,
b[f],c);return a}if((f=a.once||a.one||a.addOnceEventListener||a.addOnceListener)&&A.freeze(a,"one"+b))return f.call(a,b,c),A.a(a,"one"+b),a;d.b=c;D(a,b,d);return a}function e(a){if(a){for(var b in g)a[b]=g[b];return a}}window.Emitter=e;var l,r,t,n=new WeakMap;h.add=function(a,b,c){n.has(a)||n.set(a,{});a=n.get(a);(a[b]=a[b]||[]).push(c)};l={freeze:function(a,b){var c=s.get(a);if(c&&c[b])return!1;c||(c={},s.set(a,c));return c[b]=!0},a:function(a,b){var c=s.get(a);if(!c||!c[b])return!1;c[b]=null;return!0},
isFrozen:function(a,b){var c=s.get(a);return c&&c[b]}};var s=new WeakMap;r=function(a){return a instanceof Array};t=function(a,b,c,d){var f,e=b;if(a){a.nodeType||a===E||a===F?(b instanceof Event?e=b:(e=document.createEvent("CustomEvent"),e.initCustomEvent(b,d,!0,c)),f=a.dispatchEvent):u&&a instanceof u?(e=u.Event(b,c),e.detail=c,f=d?targte.c:a.d):f=a.emit||a.trigger||a.fire||a.dispatchEvent;if(f&&l.freeze(a,"emit"+b))return f.call(a,e,c,d),l.a(a,"emit"+b),a;f=h(a,e).slice();for(var e=[].slice.call(arguments,
2),g=0;g<f.length;g++)f[g]&&f[g].apply(a,e);return a}};var u="undefined"===typeof jQuery?void 0:jQuery,E="undefined"===typeof document?void 0:document,F="undefined"===typeof window?void 0:window,p=l,v=r,w=h,y=l,B=h,x=r,A=l,z=r,C=k,D=m,g=e.prototype;g.on=function(a,b){return m(this,a,b)};g.once=function(a,b){return q(this,a,b)};g.off=function(a,b){return k(this,a,b)};g.emit=function(a,b,c){return t(this,a,b,c)};g.listeners=function(a){return h(this,a)};g.hasListeners=function(a){return!!h(this,a).length};
e.on=function(a,b,c){m(a,b,c);return e};e.once=function(a,b,c){q(a,b,c);return e};e.off=function(a,b,c){k(a,b,c);return e};e.emit=function(a,b,c,d){t(a,b,c,d);return e};e.listeners=h;e.hasListeners=function(a,b){return!!h(a,b).length}})();
